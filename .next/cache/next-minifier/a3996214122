{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{CMm7:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/campaigns/requests\",function(){return a(\"Mybo\")}])},Mybo:function(e,t,a){\"use strict\";a.r(t);var n=a(\"o0o1\"),r=a.n(n),c=a(\"1OyB\"),l=a(\"vuIU\"),s=a(\"Ji7U\"),o=a(\"md7G\"),i=a(\"foSv\"),u=a(\"q1tI\"),p=a.n(u),d=a(\"plLG\"),b=a(\"8cHP\"),f=a(\"pVnL\"),v=a.n(f),O=(a(\"Wt1U\"),a(\"3WF5\")),j=a.n(O),m=a(\"TSYQ\"),h=a.n(m),g=(a(\"c31U\"),a(\"ZeOK\")),w=a(\"ICNK\"),y=a(\"Y53p\"),R=a(\"H+2d\");function A(e){var t=e.children,a=e.className,n=h()(a),r=Object(w.a)(A,e),c=Object(y.a)(A,e);return p.a.createElement(c,v()({},r,{className:n}),t)}A.handledProps=[\"as\",\"children\",\"className\"],A.defaultProps={as:\"tbody\"},A.propTypes={};var N=A,P=a(\"MZgk\"),C=a(\"D1pA\");function x(e){var t=e.active,a=e.children,n=e.className,r=e.collapsing,c=e.content,l=e.disabled,s=e.error,o=e.icon,i=e.negative,u=e.positive,d=e.selectable,b=e.singleLine,f=e.textAlign,O=e.verticalAlign,j=e.warning,m=e.width,A=h()(Object(g.a)(t,\"active\"),Object(g.a)(r,\"collapsing\"),Object(g.a)(l,\"disabled\"),Object(g.a)(s,\"error\"),Object(g.a)(i,\"negative\"),Object(g.a)(u,\"positive\"),Object(g.a)(d,\"selectable\"),Object(g.a)(b,\"single line\"),Object(g.a)(j,\"warning\"),Object(g.d)(f),Object(g.f)(O),Object(g.g)(m,\"wide\"),n),N=Object(w.a)(x,e),P=Object(y.a)(x,e);return R.a.isNil(a)?p.a.createElement(P,v()({},N,{className:A}),C.a.create(o),c):p.a.createElement(P,v()({},N,{className:A}),a)}x.handledProps=[\"active\",\"as\",\"children\",\"className\",\"collapsing\",\"content\",\"disabled\",\"error\",\"icon\",\"negative\",\"positive\",\"selectable\",\"singleLine\",\"textAlign\",\"verticalAlign\",\"warning\",\"width\"],x.defaultProps={as:\"td\"},x.propTypes={},x.create=Object(P.e)(x,(function(e){return{content:e}}));var q=x;function k(e){var t=e.children,a=e.className,n=e.content,r=e.fullWidth,c=h()(Object(g.a)(r,\"full-width\"),a),l=Object(w.a)(k,e),s=Object(y.a)(k,e);return p.a.createElement(s,v()({},l,{className:c}),R.a.isNil(t)?n:t)}k.handledProps=[\"as\",\"children\",\"className\",\"content\",\"fullWidth\"],k.defaultProps={as:\"thead\"},k.propTypes={};var E=k;function T(e){var t=e.as,a=Object(w.a)(T,e);return p.a.createElement(E,v()({},a,{as:t}))}T.handledProps=[\"as\"],T.propTypes={},T.defaultProps={as:\"tfoot\"};var D=T;function B(e){var t=e.as,a=e.className,n=e.sorted,r=h()(Object(g.e)(n,\"sorted\"),a),c=Object(w.a)(B,e);return p.a.createElement(q,v()({},c,{as:t,className:r}))}B.handledProps=[\"as\",\"className\",\"sorted\"],B.propTypes={},B.defaultProps={as:\"th\"};var L=B;function z(e){var t=e.active,a=e.cellAs,n=e.cells,r=e.children,c=e.className,l=e.disabled,s=e.error,o=e.negative,i=e.positive,u=e.textAlign,d=e.verticalAlign,b=e.warning,f=h()(Object(g.a)(t,\"active\"),Object(g.a)(l,\"disabled\"),Object(g.a)(s,\"error\"),Object(g.a)(o,\"negative\"),Object(g.a)(i,\"positive\"),Object(g.a)(b,\"warning\"),Object(g.d)(u),Object(g.f)(d),c),O=Object(w.a)(z,e),m=Object(y.a)(z,e);return R.a.isNil(r)?p.a.createElement(m,v()({},O,{className:f}),j()(n,(function(e){return q.create(e,{defaultProps:{as:a}})}))):p.a.createElement(m,v()({},O,{className:f}),r)}z.handledProps=[\"active\",\"as\",\"cellAs\",\"cells\",\"children\",\"className\",\"disabled\",\"error\",\"negative\",\"positive\",\"textAlign\",\"verticalAlign\",\"warning\"],z.defaultProps={as:\"tr\",cellAs:\"td\"},z.propTypes={},z.create=Object(P.e)(z,(function(e){return{cells:e}}));var F=z;function H(e){var t=e.attached,a=e.basic,n=e.celled,r=e.children,c=e.className,l=e.collapsing,s=e.color,o=e.columns,i=e.compact,u=e.definition,d=e.fixed,b=e.footerRow,f=e.headerRow,O=e.headerRows,m=e.inverted,A=e.padded,P=e.renderBodyRow,C=e.selectable,x=e.singleLine,q=e.size,k=e.sortable,T=e.stackable,B=e.striped,L=e.structured,z=e.tableData,I=e.textAlign,_=e.unstackable,M=e.verticalAlign,W=h()(\"ui\",s,q,Object(g.a)(n,\"celled\"),Object(g.a)(l,\"collapsing\"),Object(g.a)(u,\"definition\"),Object(g.a)(d,\"fixed\"),Object(g.a)(m,\"inverted\"),Object(g.a)(C,\"selectable\"),Object(g.a)(x,\"single line\"),Object(g.a)(k,\"sortable\"),Object(g.a)(T,\"stackable\"),Object(g.a)(B,\"striped\"),Object(g.a)(L,\"structured\"),Object(g.a)(_,\"unstackable\"),Object(g.b)(t,\"attached\"),Object(g.b)(a,\"basic\"),Object(g.b)(i,\"compact\"),Object(g.b)(A,\"padded\"),Object(g.d)(I),Object(g.f)(M),Object(g.g)(o,\"column\"),\"table\",c),J=Object(w.a)(H,e),S=Object(y.a)(H,e);if(!R.a.isNil(r))return p.a.createElement(S,v()({},J,{className:W}),r);var U={defaultProps:{cellAs:\"th\"}},Q=(f||O)&&p.a.createElement(E,null,F.create(f,U),j()(O,(function(e){return F.create(e,U)})));return p.a.createElement(S,v()({},J,{className:W}),Q,p.a.createElement(N,null,P&&j()(z,(function(e,t){return F.create(P(e,t))}))),b&&p.a.createElement(D,null,F.create(b)))}H.handledProps=[\"as\",\"attached\",\"basic\",\"celled\",\"children\",\"className\",\"collapsing\",\"color\",\"columns\",\"compact\",\"definition\",\"fixed\",\"footerRow\",\"headerRow\",\"headerRows\",\"inverted\",\"padded\",\"renderBodyRow\",\"selectable\",\"singleLine\",\"size\",\"sortable\",\"stackable\",\"striped\",\"structured\",\"tableData\",\"textAlign\",\"unstackable\",\"verticalAlign\"],H.defaultProps={as:\"table\"},H.propTypes={},H.Body=N,H.Cell=q,H.Footer=D,H.Header=E,H.HeaderCell=L,H.Row=F;var I=H,_=a(\"QetY\"),M=a(\"VC3L\"),W=a(\"JX7q\"),J=a(\"rePB\"),S=a(\"oZBQ\"),U=p.a.createElement;function Q(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var X=function(e){Object(s.a)(n,e);var t,a=(t=n,function(){var e,a=Object(i.a)(t);if(Q()){var n=Object(i.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(o.a)(this,e)});function n(){var e;Object(c.a)(this,n);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return e=a.call.apply(a,[this].concat(l)),Object(J.a)(Object(W.a)(e),\"onApprove\",(function(){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(M.a)(e.props.address),n.next=3,r.a.awrap(S.a.eth.getAccounts());case 3:return a=n.sent,n.next=6,r.a.awrap(t.methods.approveRequest(e.props.id).send({from:a[0]}));case 6:case\"end\":return n.stop()}}),null,null,null,Promise)})),Object(J.a)(Object(W.a)(e),\"onFinalize\",(function(){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(M.a)(e.props.address),n.next=3,r.a.awrap(S.a.eth.getAccounts());case 3:return a=n.sent,n.next=6,r.a.awrap(t.methods.finalizeRequest(e.props.id).send({from:a[0]}));case 6:case\"end\":return n.stop()}}),null,null,null,Promise)})),e}return Object(l.a)(n,[{key:\"render\",value:function(){var e=I.Row,t=I.Cell,a=this.props,n=a.id,r=a.request,c=a.approversCount,l=r.approvalCount>c/2;return U(e,{disabled:r.complete,positive:l&&!r.complete},U(t,null,n),U(t,null,r.description),U(t,null,S.a.utils.fromWei(r.value,\"ether\")),U(t,null,r.recepient),U(t,null,r.approvalCount,\"/\",c,\" \"),U(t,null,r.complete?null:U(_.a,{color:\"green\",basic:!0,onClick:this.onApprove},\"Approve\")),U(t,null,r.complete?null:U(_.a,{color:\"teal\",basic:!0,onClick:this.onFinalize},\"Finalize\")))}}]),n}(u.Component),Y=p.a.createElement;function Z(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=function(e){Object(s.a)(n,e);var t,a=(t=n,function(){var e,a=Object(i.a)(t);if(Z()){var n=Object(i.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(o.a)(this,e)});function n(){return Object(c.a)(this,n),a.apply(this,arguments)}return Object(l.a)(n,[{key:\"renderRows\",value:function(){var e=this;return this.props.requests.map((function(t,a){return Y(X,{key:a,id:a,request:t,address:e.props.address,approversCount:e.props.approversCount})}))}},{key:\"render\",value:function(){var e=I.Header,t=I.Row,a=I.HeaderCell,n=I.Body;return Y(d.a,null,Y(\"h3\",null,\"Requests\"),Y(b.Link,{route:\"/campaigns/\".concat(this.props.address,\"/requests/new\")},Y(\"a\",null,Y(_.a,{primary:!0,floated:\"right\",style:{marginBottom:10}},\"Add Request\"))),Y(I,null,Y(e,null,Y(t,null,Y(a,null,\"ID\"),Y(a,null,\"Description\"),Y(a,null,\"Amount\"),Y(a,null,\"Recepient\"),Y(a,null,\"Approval Count\"),Y(a,null,\"Approve\"),Y(a,null,\"Finalize\"))),Y(n,null,this.renderRows())),Y(\"div\",null,\"Found \",this.props.requestCount,\" requests\"))}}],[{key:\"getInitialProps\",value:function(e){var t,a,n,c,l;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.query.address,a=Object(M.a)(t),s.next=4,r.a.awrap(a.methods.getRequestCount().call());case 4:return n=s.sent,s.next=7,r.a.awrap(a.methods.approversCount().call());case 7:return c=s.sent,s.next=10,r.a.awrap(Promise.all(Array(parseInt(n)).fill().map((function(e,t){return a.methods.requests(t).call()}))));case 10:return l=s.sent,s.abrupt(\"return\",{address:t,requests:l,requestCount:n,approversCount:c});case 12:case\"end\":return s.stop()}}),null,null,null,Promise)}}]),n}(u.Component);t.default=G}},[[\"CMm7\",0,2,1,3,5]]]);"}